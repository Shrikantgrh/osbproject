<xsl:stylesheet version="1.0" exclude-result-prefixes="xsi oracle-xsl-mapper xsl xsd ns0 tns xp20 oraxsl mhdr oraext dvm xref socket" xmlns:java="http://www.oracle.com/XSL/Transform/java/java.lang.String" xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20" xmlns:oraxsl="http://www.oracle.com/XSL/Transform/java" xmlns:mhdr="http://www.oracle.com/XSL/Transform/java/oracle.tip.mediator.service.common.functions.MediatorExtnFunction" xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tns="http://www.cdisc.org/ns/odm/v1.3" xmlns:oracle-xsl-mapper="http://www.oracle.com/xsl/mapper/schemas" xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:socket="http://www.oracle.com/XSL/Transform/java/oracle.tip.adapter.socket.ProtocolTranslator" xmlns:ns0="http://soa.incresearch.com/Rave/STS" xmlns:plnk="http://docs.oasis-open.org/wsbpel/2.0/plnktype" xmlns:client="http://xmlns.oracle.com/RaveSTSPOC/DemoStudyTFM/DemoStudyBPELProcess" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:ns1="http://soa.incresearch.com/Rave/URL" xmlns:mdsol="http://www.mdsol.com/ns/odm/metadata" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:DVMFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.functions.dvm.DVMFunctions" xmlns:BasicCredentialsUserFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.BasicCredentialsUserFunction" xmlns:IsUserInRoleFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.IsUserInRoleFunction" xmlns:IsUserInGroupFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.IsUserInGroupFunction" xmlns:XrefFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.functions.xref.XrefFunctions" xmlns:UUIDUserFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.UUIDUserFunction" xmlns:RuntimeTypeConversionFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.RuntimeTypeConversionFunctions" xmlns:fn="http://www.w3.org/2005/xpath-functions">
  <oracle-xsl-mapper:schema>
    <!--SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY.-->
    <oracle-xsl-mapper:mapSources>
      <oracle-xsl-mapper:source type="XSD">
        <oracle-xsl-mapper:schema location="../Schemas/RaveSTS.xsd"/>
        <oracle-xsl-mapper:rootElement name="Subject" namespace="http://soa.incresearch.com/Rave/STS"/>
      </oracle-xsl-mapper:source>
    </oracle-xsl-mapper:mapSources>
    <oracle-xsl-mapper:mapTargets>
      <oracle-xsl-mapper:target type="XSD">
        <oracle-xsl-mapper:schema location="../Schemas/RaveODM.xsd"/>
        <oracle-xsl-mapper:rootElement name="ODM" namespace="http://www.cdisc.org/ns/odm/v1.3"/>
      </oracle-xsl-mapper:target>
    </oracle-xsl-mapper:mapTargets>
    <!--GENERATED BY ORACLE XSL MAPPER 12.1.3.0.0(XSLT Build 140529.0700.0211) AT [WED Jun 03 01:28:27 EDT 2018].-->
  </oracle-xsl-mapper:schema>
  <!--User Editing allowed BELOW this line - DO NOT DELETE THIS LINE-->
  <xsl:template match="/">
    <tns:ODM FileType="Transactional" FileOID="{/ns0:Subject/tns:ODM/@FileOID}" CreationDateTime="{/ns0:Subject/tns:ODM/@CreationDateTime}" ODMVersion="{/ns0:Subject/tns:ODM/@ODMVersion}">
      <xsl:for-each select="/ns0:Subject/tns:ODM/tns:ClinicalData">
        <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V1&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;MH&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V1&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;DM&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;PE&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;PREG&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;VS&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V1&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;VS&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;EG&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;LB&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;CONS&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;PANSS&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;CSSRS1&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;CGI&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;SIMPSON&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;BARNES&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;AIMS&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;SUBJECT&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;EN&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V9&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;CGITST&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;LB_HEMA&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;LB_CHEM&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;LB_COAG&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;LB_URINE&quot; or tns:SubjectData/tns:StudyEventData/@StudyEventOID = &quot;V10&quot; and tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID =&quot;LB_URIN2&quot;">
          <!-- above added all forms and folders conditions as per spec to this condition so that this doesn't create unnecessary clinical data -->
          <tns:ClinicalData MetaDataVersionOID="{@MetaDataVersionOID}" StudyOID="{/ns0:Subject/ns1:RaveUrls/ns1:RaveUrl[@utype='TARGET']/ns1:studyName}">
            <tns:SubjectData TransactionType="Update">
              <xsl:attribute name="SubjectKey">
                <xsl:value-of select="tns:SubjectData/@SubjectKey"/>
              </xsl:attribute>
              <tns:SiteRef LocationOID="{/ns0:Subject/ns0:Details/ns0:targetLocationOID}"/>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V1')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='MH'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">MH</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'MH','MH')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='MH.MHSTDAT') or ( @ItemOID='MH.MHTERM') or (@ItemOID='MH.RECGUID') or  (@ItemOID='MH.MHENDAT') or  (@ItemOID='MH.MHONG') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('MH.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='MH.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V1')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='DM'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">DM</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'DM','DM')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='DM.DOB') or (@ItemOID='DM.RECGUID') or  (@ItemOID='DM.SEX') or  (@ItemOID='DM.CBP') or  (@ItemOID='DM.ETHNIC') or  (@ItemOID='DM.RACE') or  (@ItemOID='DM.RACESP') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('DM.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='DM.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='PE'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">PE</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'PE','PE')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='PE.PEYN') or (@ItemOID='PE.RECGUID') or  (@ItemOID='PE.PEREAS') or  (@ItemOID='PE.PEDAT') or  (@ItemOID='PE.TEMP') or  (@ItemOID='PE.BODYSYS') or  (@ItemOID='PE.FINDING') or  (@ItemOID='PE.PEABNSP') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('PE.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='PE.BODYSYS')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='PREG'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">PREG</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'PREG','PREG')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='PREG.PREGYN') or (@ItemOID='PREG.RECGUID') or  (@ItemOID='PREG.PREGNSP') or  (@ItemOID='PREG.PREGDAT') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('PREG.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='PREG.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='VS'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">VS</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'VS','VS')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='VS.VSYN') or (@ItemOID='VS.RECGUID') or  (@ItemOID='VS.VSREAS') or  (@ItemOID='VS.VSDAT') or  (@ItemOID='VS.VSTIM') or  (@ItemOID='VS.WEIGHT') or  (@ItemOID='VS.WEIGHTU') or  (@ItemOID='VS.WAIST') or  (@ItemOID='VS.WAISTCRU') or  (@ItemOID='VS.BODYPOS') or  (@ItemOID='VS.SYSBP') or  (@ItemOID='VS.DIABP') or  (@ItemOID='VS.HR') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('VS.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='VS.BODYPOS')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V1')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='VS'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">VS</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'VS','VS')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='VS.HEIGHT') or (@ItemOID='VS.RECGUID') or  (@ItemOID='VS.HEIGHTU') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('VS.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='VS.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='EG'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">EG</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'EG','EG')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='EG.EGYN') or (@ItemOID='EG.RECGUID') or  (@ItemOID='EG.EGREAS') or  (@ItemOID='EG.EGDAT') or  (@ItemOID='EG.EGTIME') or  (@ItemOID='EG.EGABML') or  (@ItemOID='EG.HR') or  (@ItemOID='EG.PR') or  (@ItemOID='EG.QRS') or  (@ItemOID='EG.QT') or  (@ItemOID='EG.QTCF') or  (@ItemOID='EG.CLINSIG') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('EG.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='EG.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='LB'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">LB</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'LB','LB')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='LB.BLOODYN') or (@ItemOID='LB.RECGUID') or  (@ItemOID='LB.BLREAS') or  (@ItemOID='LB.BLDAT') or  (@ItemOID='LB.URINEYN') or  (@ItemOID='LB.URINREAS') or  (@ItemOID='LB.URINDAT') or  (@ItemOID='LB.URINABN') or  (@ItemOID='LB.URINLAB') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('LB.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='LB.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='CONS'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">CONS</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'CONS','CONS')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='CONS.CONSYN') or (@ItemOID='CONS.RECGUID') or  (@ItemOID='CONS.INTERYN') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('CONS.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='CONS.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='PANSS'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">PANSS</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'PANSS','PANSS')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='PANSS.PANSSYN') or (@ItemOID='PANSS.RECGUID') or  (@ItemOID='PANSS.PANSREAS') or  (@ItemOID='PANSS.PANSSDAT') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('PANSS.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='PANSS.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='CSSRS1'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">CSSRS1</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'CSSRS1','CSSRS1')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='CSSRS1.CSSRYN') or (@ItemOID='CSSRS1.RECGUID') or  (@ItemOID='CSSRS1.CSSRREAS') or  (@ItemOID='CSSRS1.CSSRDAT') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('CSSRS1.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='CSSRS1.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='CGI'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">CGI</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'CGI','CGI')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='CGI.CGIYN') or (@ItemOID='CGI.RECGUID') or  (@ItemOID='CGI.CGIREAS') or  (@ItemOID='CGI.CGIDAT') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('CGI.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='CGI.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='SIMPSON'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">SIMPSON</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'SIMPSON','SIMPSON')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='SIMPSON.SIMPYN') or (@ItemOID='SIMPSON.RECGUID') or  (@ItemOID='SIMPSON.SIMPREAS') or  (@ItemOID='SIMPSON.SIMPDAT') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('SIMPSON.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='SIMPSON.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='BARNES'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">BARNES</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'BARNES','BARNES')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='BARNES.BARNYN') or (@ItemOID='BARNES.RECGUID') or  (@ItemOID='BARNES.BARNREAS') or  (@ItemOID='BARNES.BARNDAT') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('BARNES.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='BARNES.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='AIMS'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">AIMS</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'AIMS','AIMS')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='AIMS.AIMSYN') or (@ItemOID='AIMS.RECGUID') or  (@ItemOID='AIMS.AIMSREAS') or  (@ItemOID='AIMS.AIMSDAT') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('AIMS.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='AIMS.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'SUBJECT')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='EN'))">
                <tns:StudyEventData StudyEventOID="SUBJECT">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">EN</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'EN','EN')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='EN.SUBJID') or (@ItemOID='EN.RECGUID') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('EN.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='EN.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V9')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='CGITST'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">CGITST</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'CGITST','CGITST')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='CGITST.CGITSTYN') or (@ItemOID='CGITST.RECGUID') or  (@ItemOID='CGITST.CGITSTNR') or  (@ItemOID='CGITST.CGITSTDT') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('CGITST.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='CGITST.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='LB_HEMA'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">LB_HEMA</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'LB_HEMA','LB_HEMA')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='LB_HEMA.LBDAT') or (@ItemOID='LB_HEMA.RECGUID') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('LB_HEMA.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='LB_HEMA.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='LB_CHEM'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">LB_CHEM</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'LB_CHEM','LB_CHEM')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='LB_CHEM.LBDAT') or (@ItemOID='LB_CHEM.RECGUID') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('LB_CHEM.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='LB_CHEM.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='LB_COAG'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">LB_COAG</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'LB_COAG','LB_COAG')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='LB_COAG.LBDAT') or (@ItemOID='LB_COAG.RECGUID') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('LB_COAG.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='LB_COAG.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='LB_URINE'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">LB_URINE</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'LB_URINE','LB_URINE')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='LB_URINE.LBDAT') or (@ItemOID='LB_URINE.RECGUID') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('LB_URINE.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='LB_URINE.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
              <xsl:if test="((tns:SubjectData/tns:StudyEventData/@StudyEventOID = 'V10')and                (tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID='LB_URIN2'))">
                <tns:StudyEventData StudyEventOID="V0">
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey">
                    <xsl:attribute name="StudyEventRepeatKey">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@StudyEventRepeatKey"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="tns:SubjectData/tns:StudyEventData/@TransactionType">
                    <xsl:attribute name="TransactionType">
                      <xsl:value-of select="tns:SubjectData/tns:StudyEventData/@TransactionType"/>
                    </xsl:attribute>
                  </xsl:if>
                  <xsl:if test="not(tns:SubjectData/tns:StudyEventData/@TransactionType)">
                    <xsl:attribute name="TransactionType">Update</xsl:attribute>
                  </xsl:if>
                  <tns:FormData>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormOID">
                      <xsl:attribute name="FormOID">LB_URIN2</xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey">
                      <xsl:attribute name="FormRepeatKey">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@FormRepeatKey"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType">
                      <xsl:attribute name="TransactionType">
                        <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType"/>
                      </xsl:attribute>
                    </xsl:if>
                    <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/@TransactionType)">
                      <xsl:attribute name="TransactionType">Update</xsl:attribute>
                    </xsl:if>
                    <tns:ItemGroupData>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID">
                        <xsl:attribute name="ItemGroupOID">
                          <xsl:value-of select="java:replaceAll(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupOID,'LB_URIN2','LB_URIN2')"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey">
                        <xsl:attribute name="ItemGroupRepeatKey">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@ItemGroupRepeatKey"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType">
                        <xsl:attribute name="TransactionType">
                          <xsl:value-of select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="not(tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/@TransactionType)">
                        <xsl:attribute name="TransactionType">Update</xsl:attribute>
                      </xsl:if>
                      <xsl:for-each select="tns:SubjectData/tns:StudyEventData/tns:FormData/tns:ItemGroupData/tns:ItemData">
                        <xsl:choose>
                          <xsl:when test="( @ItemOID='LB_URIN2.LBDAT') or (@ItemOID='LB_URIN2.RECGUID') or  (@ItemOID='LB_URIN2.APPEARNC') or  (@ItemOID='LB_URIN2.PH_M') or  (@ItemOID='LB_URIN2.UPROT_M') or  (@ItemOID='LB_URIN2.UGLUC_M') or  (@ItemOID='LB_URIN2.UKETOB_M') or  (@ItemOID='LB_URIN2.SG_M') or  (@ItemOID='LB_URIN2.UROBIL_M') or  (@ItemOID='LB_URIN2.OCCULT_M') or  (@ItemOID='LB_URIN2.UWBC_M') ">
                            <tns:ItemData mdsol:Lock="AsFound">
                              <xsl:if test="@ItemOID">
                                <xsl:attribute name="ItemOID">
                                  <xsl:value-of select="concat('LB_URIN2.',substring-after(@ItemOID,'.'))"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@Value">
                                <xsl:attribute name="Value">
                                  <xsl:value-of select="@Value"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:if test="@IsNull">
                                <xsl:attribute name="IsNull">
                                  <xsl:value-of select="@IsNull"/>
                                </xsl:attribute>
                              </xsl:if>
                              <xsl:choose>
                                <xsl:when test="(@ItemOID='LB_URIN2.RECGUID')">
                                  <xsl:attribute name="TransactionType">Context</xsl:attribute>
                                </xsl:when>
                                <xsl:otherwise>
                                  <xsl:attribute name="TransactionType">Update</xsl:attribute>
                                </xsl:otherwise>
                              </xsl:choose>
                              <xsl:value-of select="."/>
                            </tns:ItemData>
                          </xsl:when>
                        </xsl:choose>
                      </xsl:for-each>
                    </tns:ItemGroupData>
                  </tns:FormData>
                </tns:StudyEventData>
              </xsl:if>
            </tns:SubjectData>
          </tns:ClinicalData>
        </xsl:if>
      </xsl:for-each>
    </tns:ODM>
  </xsl:template>
</xsl:stylesheet>